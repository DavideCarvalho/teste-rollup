{"version":3,"sources":["webpack://hybrids/webpack/universalModuleDefinition","webpack://hybrids/webpack/bootstrap","webpack://hybrids/./src/utils.js","webpack://hybrids/(webpack)/buildin/global.js","webpack://hybrids/./src/property.js","webpack://hybrids/./src/render.js","webpack://hybrids/./src/cache.js","webpack://hybrids/./src/define.js","webpack://hybrids/./src/parent.js","webpack://hybrids/./src/children.js","webpack://hybrids/./src/html/style.js","webpack://hybrids/./src/html/classList.js","webpack://hybrids/./src/html/template.js","webpack://hybrids/./src/html/resolve.js","webpack://hybrids/./src/html/index.js","webpack://hybrids/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","camelToDash","str","replace","toLowerCase","pascalToDash","slice","dispatch","host","eventType","options","arguments","length","undefined","dispatchEvent","CustomEvent","_objectSpread","bubbles","createMap","map","WeakMap","defaultValue","has","set","shadyCSS","fn","fallback","shady","ShadyCSS","nativeShadow","stringifyElement","element","tagName","String","concat","IS_IE","global","g","this","Function","eval","e","defaultTransform","v","objectTransform","_typeof","TypeError","freeze","connect","type","transform","Number","Boolean","val","oldValue","invalidate","attrName","hasAttribute","attrValue","getAttribute","cache","FPS_THRESHOLD","queue","addToQueue","event","target","composedPath","currentTarget","requestAnimationFrame","update","index","startTime","performance","now","nextTime","prevUpdate","nextUpdate","styleElement","forEach","styleSubtree","indexOf","push","render","customOptions","render_typeof","shadowRoot","Error","shadowRootInit","assign","attachShadow","addEventListener","removeEventListener","delete","entries","getEntry","targetMap","Map","entry","deps","Set","state","checksum","calculateChecksum","_ref","context","dispatchInvalidate","composed","defaultGet","compile","Hybrid","hybrids","connects","keys","config","define_typeof","add","parentContext","clear","nextValue","newValue","_this","setter","callback","configurable","process","clearValue","defineElement","hybridsOrConstructor","CustomElement","customElements","_HTMLElement","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","apply","_inherits","_wrapNativeSuper","HTMLElement","_createClass","_this2","list","constructor","reduce","acc","result","elements","defineMap","parent","hybridsOrFn","node","parentElement","parentNode","walk","children","deep","nested","items","Array","from","child","observer","MutationObserver","childEventListener","size","Promise","resolve","then","observe","childList","subtree","disconnect","resolveStyle","data","style_typeof","previousMap","styleMap","dashKey","styleValue","style","setProperty","removeProperty","resolveClassList","previousList","classSet","isArray","className","classList_typeof","normalizeValue","classList","remove","document","dataMap","getTemplateEnd","endNode","removeTemplate","startNode","lastNextSibling","nextSibling","removeChild","resolveValue","template_typeof","textContent","previousSibling","lastIndex","arrayEntries","indexedValue","item","id","ids","_ref2","_slicedToArray","placeholder","available","_ref3","_ref4","find","entryItem","insertBefore","prevNode","nextNode","movePlaceholder","createTextNode","resolveArray","TIMESTAMP","Date","getPlaceholder","PLACEHOLDER_REGEXP_TEXT","PLACEHOLDER_REGEXP_EQUAL","RegExp","PLACEHOLDER_REGEXP_ALL","ATTR_PREFIX","ATTR_REGEXP","preparedTemplates","createWalker","ShadyDOM","inUse","currentNode","childNodes","createTreeWalker","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","container","createElement","rawParts","isSVG","template","parts","signature","part","join","match","createSignature","innerHTML","content","appendChild","svgRoot","firstChild","fragment","iterator","createNodeIterator","SHOW_COMMENT","test","replaceComments","compileWalker","compileIndex","_loop","nodeType","Node","TEXT_NODE","text","results","_acc$pop$split2","pop","split","before","next","equal","ELEMENT_NODE","attributes","attr","trim","propertyName","string","getPropertyName","substr","fnMap","eventName","_len","args","_key","resolveStyleList","SVGElement","removeAttribute","setAttribute","resolveProperty","partialName","importNode","clone","cloneNode","styles","querySelectorAll","count","prepareTemplate","applyShadyCSS","renderWalker","clonedParts","renderIndex","currentPart","shift","markers","previousChild","_ref5","_ref6","promise","delay","timeout","setTimeout","clearTimeout","defineElements","updates","createId","html","svg","_len2","_key2","__webpack_exports__","parent_parent","render_render","utils"],"mappings":"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","file":"hybrids.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hybrids\"] = factory();\n\telse\n\t\troot[\"hybrids\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","export function camelToDash(str) {\n  return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n\nexport function pascalToDash(str) {\n  str = str[0].toLowerCase() + str.slice(1);\n  return camelToDash(str);\n}\n\nexport function dispatch(host, eventType, options = {}) {\n  return host.dispatchEvent(new CustomEvent(eventType, { bubbles: false, ...options }));\n}\n\nexport function createMap() {\n  const map = new WeakMap();\n\n  return {\n    get(key, defaultValue) {\n      if (map.has(key)) {\n        return map.get(key);\n      }\n\n      if (defaultValue !== undefined) {\n        map.set(key, defaultValue);\n      }\n\n      return defaultValue;\n    },\n    set(key, value) {\n      map.set(key, value);\n      return value;\n    },\n  };\n}\n\nexport function shadyCSS(fn, fallback) {\n  const shady = window.ShadyCSS;\n  if (shady && !shady.nativeShadow) {\n    return fn(shady);\n  }\n\n  return fallback;\n}\n\nexport function stringifyElement(element) {\n  const tagName = String(element.tagName).toLowerCase();\n  return `<${tagName}>`;\n}\n\nexport const IS_IE = 'ActiveXObject' in global;\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","import { camelToDash } from './utils';\n\nconst defaultTransform = v => v;\n\nconst objectTransform = (value) => {\n  if (typeof value !== 'object') {\n    throw TypeError(`[property] Argument is not an object: ${typeof v}`);\n  }\n  return value && Object.freeze(value);\n};\n\nexport default function property(value, connect) {\n  const type = typeof value;\n  let transform = defaultTransform;\n\n  switch (type) {\n    case 'string':\n      transform = String;\n      break;\n    case 'number':\n      transform = Number;\n      break;\n    case 'boolean':\n      transform = Boolean;\n      break;\n    case 'function':\n      transform = value;\n      value = transform();\n      break;\n    case 'object':\n      if (value) Object.freeze(value);\n      transform = objectTransform;\n      break;\n    default: break;\n  }\n\n  return {\n    get: (host, val = value) => val,\n    set: (host, val = value, oldValue) => transform(val, oldValue),\n    connect: type !== 'object' && type !== 'undefined'\n      ? (host, key, invalidate) => {\n        if (host[key] === value) {\n          const attrName = camelToDash(key);\n\n          if (host.hasAttribute(attrName)) {\n            const attrValue = host.getAttribute(attrName);\n            host[key] = attrValue !== '' ? attrValue : true;\n          }\n        }\n\n        return connect && connect(host, key, invalidate);\n      }\n      : connect,\n  };\n}\n","import { shadyCSS } from './utils';\n\nconst map = new WeakMap();\nconst cache = new WeakMap();\nconst FPS_THRESHOLD = 1000 / 60; // 60 FPS ~ 16,67ms time window\nlet queue = [];\n\nexport function update(index = 0, startTime = 0) {\n  if (startTime && (performance.now() - startTime > FPS_THRESHOLD)) {\n    requestAnimationFrame(() => update(index));\n  } else {\n    const target = queue[index];\n    const nextTime = performance.now();\n\n    if (!target) {\n      shadyCSS(shady => queue.forEach(t => shady.styleSubtree(t)));\n      queue = [];\n    } else {\n      if (map.has(target)) {\n        const key = map.get(target);\n        const prevUpdate = cache.get(target);\n        try {\n          const nextUpdate = target[key];\n          if (nextUpdate !== prevUpdate) {\n            cache.set(target, nextUpdate);\n            nextUpdate();\n            if (!prevUpdate) shadyCSS(shady => shady.styleElement(target));\n          }\n        } catch (e) {\n          update(index + 1, nextTime);\n          throw e;\n        }\n      }\n      update(index + 1, nextTime);\n    }\n  }\n}\n\nfunction addToQueue(event) {\n  const target = event.composedPath()[0];\n  if (target === event.currentTarget) {\n    if (!queue[0]) {\n      requestAnimationFrame((() => update()));\n    }\n    if (queue.indexOf(target) === -1) {\n      queue.push(target);\n    }\n  }\n}\n\nexport default function render(get, customOptions = {}) {\n  if (typeof get !== 'function') {\n    throw TypeError(`[render] The first argument must be a function: ${typeof get}`);\n  }\n\n  const options = { shadowRoot: true, ...customOptions };\n\n  return {\n    get: (host) => {\n      const fn = get(host);\n      return () => fn(host, options.shadowRoot ? host.shadowRoot : host);\n    },\n    connect(host, key) {\n      if (map.has(host)) {\n        throw Error(`[render] Render factory already used in '${map.get(host)}' key`);\n      }\n\n      if (options.shadowRoot && !host.shadowRoot) {\n        const shadowRootInit = { mode: 'open' };\n        if (typeof options.shadowRoot === 'object') {\n          Object.assign(shadowRootInit, options.shadowRoot);\n        }\n        host.attachShadow(shadowRootInit);\n      }\n\n      host.addEventListener('@invalidate', addToQueue);\n      map.set(host, key);\n\n      return () => {\n        host.removeEventListener('@invalidate', addToQueue);\n        map.delete(host);\n      };\n    },\n  };\n}\n","import { stringifyElement } from './utils';\n\nconst entries = new WeakMap();\nexport function getEntry(target, key) {\n  let targetMap = entries.get(target);\n  if (!targetMap) {\n    targetMap = new Map();\n    entries.set(target, targetMap);\n  }\n\n  let entry = targetMap.get(key);\n\n  if (!entry) {\n    entry = {\n      target,\n      key,\n      value: undefined,\n      deps: new Set(),\n      state: 1,\n      checksum: 0,\n    };\n    targetMap.set(key, entry);\n  }\n\n  return entry;\n}\n\nfunction calculateChecksum({ state, deps }) {\n  let checksum = state;\n  deps.forEach((entry) => {\n    // eslint-disable-next-line no-unused-expressions\n    entry.target[entry.key];\n    checksum += entry.state;\n  });\n\n  return checksum;\n}\n\nlet context = null;\nexport function get(target, key, getter) {\n  const entry = getEntry(target, key);\n\n  if (context === entry) {\n    context = null;\n    throw Error(`[cache] Circular '${key}' get invocation in '${stringifyElement(target)}'`);\n  }\n\n  if (context) {\n    context.deps.add(entry);\n  }\n\n  const parentContext = context;\n  context = entry;\n\n  if (entry.checksum && entry.checksum === calculateChecksum(entry)) {\n    context = parentContext;\n    return entry.value;\n  }\n\n  entry.deps.clear();\n\n  try {\n    const nextValue = getter(target, entry.value);\n\n    if (nextValue !== entry.value) {\n      entry.state += 1;\n      entry.value = nextValue;\n    }\n\n    entry.checksum = calculateChecksum(entry);\n    context = parentContext;\n  } catch (e) {\n    context = null;\n    throw e;\n  }\n\n  return entry.value;\n}\n\nexport function set(target, key, setter, value, callback) {\n  if (context) {\n    context = null;\n    throw Error(`[cache] Try to set '${key}' of '${stringifyElement(target)}' in get call`);\n  }\n\n  const entry = getEntry(target, key);\n  const newValue = setter(target, value, entry.value);\n\n  if (newValue !== entry.value) {\n    entry.state += 1;\n    entry.value = newValue;\n\n    callback();\n  }\n}\n\nexport function invalidate(target, key, clearValue) {\n  if (context) {\n    context = null;\n    throw Error(`[cache] Try to invalidate '${key}' in '${stringifyElement(target)}' get call`);\n  }\n\n  const entry = getEntry(target, key);\n\n  entry.checksum = 0;\n\n  if (clearValue) {\n    entry.value = undefined;\n  }\n}\n","import property from './property';\nimport render from './render';\n\nimport * as cache from './cache';\nimport { dispatch, pascalToDash } from './utils';\n\nfunction dispatchInvalidate(host) {\n  dispatch(host, '@invalidate', { bubbles: true, composed: true });\n}\n\nconst defaultGet = (host, value) => value;\n\nfunction compile(Hybrid, hybrids) {\n  Hybrid.hybrids = hybrids;\n  Hybrid.connects = [];\n\n  Object.keys(hybrids).forEach((key) => {\n    let config = hybrids[key];\n    const type = typeof config;\n\n    if (type === 'function') {\n      config = key === 'render' ? render(config) : { get: config };\n    } else if (config === null || type !== 'object' || (type === 'object' && !config.get && !config.set)) {\n      config = property(config);\n    }\n\n    config.get = config.get || defaultGet;\n\n    Object.defineProperty(Hybrid.prototype, key, {\n      get: function get() {\n        return cache.get(this, key, config.get);\n      },\n      set: config.set && function set(newValue) {\n        cache.set(this, key, config.set, newValue, () => dispatchInvalidate(this));\n      },\n      enumerable: true,\n      configurable: process.env.NODE_ENV !== 'production',\n    });\n\n    if (config.connect) {\n      Hybrid.connects.push(host => config.connect(host, key, (clearCache = true) => {\n        if (clearCache) cache.invalidate(host, key);\n        dispatchInvalidate(host);\n      }));\n    }\n  });\n}\n\nlet update;\nif (process.env.NODE_ENV !== 'production') {\n  const walkInShadow = (node, fn) => {\n    fn(node);\n\n    Array.from(node.children)\n      .forEach(el => walkInShadow(el, fn));\n\n    if (node.shadowRoot) {\n      Array.from(node.shadowRoot.children)\n        .forEach(el => walkInShadow(el, fn));\n    }\n  };\n\n  const updateQueue = new Map();\n  update = (Hybrid, lastHybrids) => {\n    if (!updateQueue.size) {\n      Promise.resolve().then(() => {\n        walkInShadow(document.body, (node) => {\n          if (updateQueue.has(node.constructor)) {\n            const hybrids = updateQueue.get(node.constructor);\n            node.disconnectedCallback();\n\n            Object.keys(node.constructor.hybrids).forEach((key) => {\n              cache.invalidate(node, key, node[key] === hybrids[key]);\n            });\n\n            node.connectedCallback();\n            dispatchInvalidate(node);\n          }\n        });\n        updateQueue.clear();\n      });\n    }\n    updateQueue.set(Hybrid, lastHybrids);\n  };\n}\n\nconst connects = new WeakMap();\n\nfunction defineElement(tagName, hybridsOrConstructor) {\n  const type = typeof hybridsOrConstructor;\n  if (type !== 'object' && type !== 'function') {\n    throw TypeError('[define] Invalid second argument. It must be an object or a function');\n  }\n\n  const CustomElement = window.customElements.get(tagName);\n\n  if (type === 'function') {\n    if (CustomElement !== hybridsOrConstructor) {\n      return window.customElements.define(tagName, hybridsOrConstructor);\n    }\n    return CustomElement;\n  }\n\n  if (CustomElement) {\n    if (CustomElement.hybrids === hybridsOrConstructor) {\n      return CustomElement;\n    }\n    if (process.env.NODE_ENV !== 'production' && CustomElement.hybrids) {\n      Object.keys(CustomElement.hybrids).forEach((key) => {\n        delete CustomElement.prototype[key];\n      });\n\n      const lastHybrids = CustomElement.hybrids;\n\n      compile(CustomElement, hybridsOrConstructor);\n      update(CustomElement, lastHybrids);\n\n      return CustomElement;\n    }\n\n    throw Error(`[define] Element '${tagName}' already defined`);\n  }\n\n  class Hybrid extends HTMLElement {\n    static get name() { return tagName; }\n\n    connectedCallback() {\n      const list = this.constructor.connects.reduce((acc, fn) => {\n        const result = fn(this);\n        if (result) acc.add(result);\n        return acc;\n      }, new Set());\n\n      connects.set(this, list);\n      dispatchInvalidate(this);\n    }\n\n    disconnectedCallback() {\n      const list = connects.get(this);\n      list.forEach(fn => fn());\n    }\n  }\n\n  compile(Hybrid, hybridsOrConstructor);\n  customElements.define(tagName, Hybrid);\n\n  return Hybrid;\n}\n\nfunction defineMap(elements) {\n  return Object.keys(elements).reduce((acc, key) => {\n    const tagName = pascalToDash(key);\n    acc[key] = defineElement(tagName, elements[key]);\n\n    return acc;\n  }, {});\n}\n\nexport default function define(...args) {\n  if (typeof args[0] === 'object') {\n    return defineMap(args[0]);\n  }\n\n  return defineElement(...args);\n}\n","const map = new WeakMap();\n\ndocument.addEventListener('@invalidate', (event) => {\n  const set = map.get(event.composedPath()[0]);\n  if (set) set.forEach(fn => fn());\n});\n\nfunction walk(node, fn) {\n  let parentElement = node.parentElement || node.parentNode.host;\n\n  while (parentElement) {\n    const hybrids = parentElement.constructor.hybrids;\n\n    if (hybrids && fn(hybrids)) {\n      return parentElement;\n    }\n\n    parentElement = parentElement.parentElement\n      || (parentElement.parentNode && parentElement.parentNode.host);\n  }\n\n  return parentElement || null;\n}\n\nexport default function parent(hybridsOrFn) {\n  const fn = typeof hybridsOrFn === 'function' ? hybridsOrFn : hybrids => hybrids === hybridsOrFn;\n  return {\n    get: host => walk(host, fn),\n    connect(host, key, invalidate) {\n      const target = host[key];\n\n      if (target) {\n        let set = map.get(target);\n        if (!set) {\n          set = new Set();\n          map.set(target, set);\n        }\n\n        set.add(invalidate);\n\n        return () => {\n          set.delete(invalidate);\n          invalidate();\n        };\n      }\n\n      return false;\n    },\n  };\n}\n","function walk(node, fn, options, items = []) {\n  Array.from(node.children).forEach((child) => {\n    const hybrids = child.constructor.hybrids;\n    if (hybrids && fn(hybrids)) {\n      items.push(child);\n      if (options.deep && options.nested) {\n        walk(child, fn, options, items);\n      }\n    } else if (options.deep) {\n      walk(child, fn, options, items);\n    }\n  });\n\n  return items;\n}\n\nexport default function children(hybridsOrFn, options = { deep: false, nested: false }) {\n  const fn = typeof hybridsOrFn === 'function' ? hybridsOrFn : hybrids => hybrids === hybridsOrFn;\n  return {\n    get(host) { return walk(host, fn, options); },\n    connect(host, key, invalidate) {\n      const observer = new MutationObserver(invalidate);\n      const set = new Set();\n\n      const childEventListener = ({ target }) => {\n        if (!set.size) {\n          Promise.resolve().then(() => {\n            const list = host[key];\n            for (let i = 0; i < list.length; i += 1) {\n              if (set.has(list[i])) {\n                invalidate(false);\n                break;\n              }\n            }\n            set.clear();\n          });\n        }\n        set.add(target);\n      };\n\n      observer.observe(host, {\n        childList: true, subtree: !!options.deep,\n      });\n\n      host.addEventListener('@invalidate', childEventListener);\n\n      return () => {\n        observer.disconnect();\n        host.removeEventListener('@invalidate', childEventListener);\n      };\n    },\n  };\n}\n","import { camelToDash } from '../utils';\n\nexport default function resolveStyle(host, target, value, data) {\n  if (value === null || typeof value !== 'object') {\n    throw TypeError('Style value must be an object instance');\n  }\n\n  const previousMap = data.styleMap || new Map();\n\n  data.styleMap = Object.keys(value).reduce((map, key) => {\n    const dashKey = camelToDash(key);\n    const styleValue = value[key];\n\n    if (!styleValue && styleValue !== 0) {\n      target.style.removeProperty(dashKey);\n    } else {\n      target.style.setProperty(dashKey, styleValue);\n    }\n\n    map.set(dashKey, styleValue);\n    previousMap.delete(dashKey);\n\n    return map;\n  }, new Map());\n\n  previousMap.forEach((styleValue, key) => { target.style[key] = ''; });\n}\n","function normalizeValue(value, set = new Set()) {\n  if (Array.isArray(value)) {\n    value.forEach(className => set.add(className));\n  } else if (value !== null && typeof value === 'object') {\n    Object.keys(value).forEach(key => value[key] && set.add(key));\n  } else {\n    set.add(value);\n  }\n\n  return set;\n}\n\nexport default function resolveClassList(host, target, value, data) {\n  const previousList = data.classSet || new Set();\n  const list = normalizeValue(value);\n\n  data.classSet = list;\n\n  list.forEach((className) => {\n    target.classList.add(className);\n    previousList.delete(className);\n  });\n\n  previousList.forEach((className) => {\n    target.classList.remove(className);\n  });\n}\n","import {\n  createMap, shadyCSS, stringifyElement, IS_IE,\n} from '../utils';\n\nimport resolveStyleList from './style';\nimport resolveClassList from './classList';\n\nconst dataMap = createMap();\n\nfunction getTemplateEnd(node) {\n  let data;\n  // eslint-disable-next-line no-cond-assign\n  while (node && (data = dataMap.get(node)) && data.endNode) {\n    node = data.endNode;\n  }\n\n  return node;\n}\n\nfunction removeTemplate(target) {\n  const data = dataMap.get(target);\n  const startNode = data.startNode;\n\n  if (startNode) {\n    const endNode = getTemplateEnd(data.endNode);\n\n    let node = startNode;\n    const lastNextSibling = endNode.nextSibling;\n\n    while (node) {\n      const nextSibling = node.nextSibling;\n      node.parentNode.removeChild(node);\n      node = nextSibling !== lastNextSibling && nextSibling;\n    }\n  }\n}\n\nfunction resolveValue(host, target, value) {\n  const type = Array.isArray(value) ? 'array' : typeof value;\n  let data = dataMap.get(target, {});\n\n  if (data.type !== type) {\n    removeTemplate(target);\n    data = dataMap.set(target, { type });\n\n    if (target.textContent !== '') {\n      target.textContent = '';\n    }\n  }\n\n  switch (type) {\n    case 'function':\n      value(host, target);\n      break;\n    case 'array':\n      // eslint-disable-next-line no-use-before-define\n      resolveArray(host, target, value);\n      break;\n    default:\n      if (value !== data.value) {\n        data.value = value;\n        target.textContent = type === 'number' || value ? value : '';\n      }\n  }\n}\n\nfunction movePlaceholder(target, previousSibling) {\n  const data = dataMap.get(target);\n  const startNode = data.startNode;\n  const endNode = getTemplateEnd(data.endNode);\n\n  previousSibling.parentNode.insertBefore(target, previousSibling.nextSibling);\n\n  let prevNode = target;\n  let node = startNode;\n  while (node) {\n    const nextNode = node.nextSibling;\n    prevNode.parentNode.insertBefore(node, prevNode.nextSibling);\n    prevNode = node;\n    node = nextNode !== endNode.nextSibling && nextNode;\n  }\n}\n\nfunction resolveArray(host, target, value) {\n  let previousSibling = target;\n  const lastIndex = value.length - 1;\n  const data = dataMap.get(target);\n  const { arrayEntries } = data;\n\n  const indexedValue = value.map((item, index) => [\n    Object.prototype.hasOwnProperty.call(item, 'id') ? item.id : index,\n    item,\n  ]);\n\n  if (arrayEntries) {\n    const ids = new Set();\n    indexedValue.forEach(([id]) => ids.add(id));\n\n    arrayEntries.forEach((entry) => {\n      const { id, placeholder } = entry;\n      if (!ids.has(id)) {\n        removeTemplate(placeholder);\n        placeholder.parentNode.removeChild(placeholder);\n        entry.available = false;\n      }\n    });\n  }\n\n  data.arrayEntries = indexedValue.reduce((entries, [id, item], index) => {\n    const entry = arrayEntries && arrayEntries\n      .find(entryItem => entryItem.available && entryItem.id === id);\n\n    let placeholder;\n    if (entry) {\n      entry.available = false;\n      placeholder = entry.placeholder;\n\n      if (placeholder.previousSibling !== previousSibling) {\n        movePlaceholder(placeholder, previousSibling);\n      }\n    } else {\n      placeholder = document.createTextNode('');\n      previousSibling.parentNode.insertBefore(placeholder, previousSibling.nextSibling);\n    }\n\n    resolveValue(host, placeholder, item);\n\n    previousSibling = getTemplateEnd(dataMap.get(placeholder).endNode || placeholder);\n\n    if (index === 0) data.startNode = placeholder;\n    if (index === lastIndex) data.endNode = previousSibling;\n\n    entries.push({ available: true, id, placeholder });\n\n    return entries;\n  }, []);\n\n  if (arrayEntries) {\n    arrayEntries.forEach((entry) => {\n      const { available, placeholder } = entry;\n      if (available) {\n        removeTemplate(placeholder);\n        placeholder.parentNode.removeChild(placeholder);\n      }\n    });\n  }\n}\n\nfunction resolveProperty(attrName, propertyName, isSVG) {\n  if (propertyName.substr(0, 2) === 'on') {\n    const fnMap = new WeakMap();\n    const eventName = propertyName.substr(2);\n\n    return (host, target, value) => {\n      if (!fnMap.has(target)) {\n        target.addEventListener(eventName, (...args) => {\n          const fn = fnMap.get(target);\n          if (fn) fn(host, ...args);\n        });\n      }\n\n      fnMap.set(target, value);\n    };\n  }\n\n  switch (attrName) {\n    case 'style': return resolveStyleList;\n    case 'class': return resolveClassList;\n    default:\n      return (host, target, value) => {\n        if (!isSVG && !(target instanceof SVGElement) && (propertyName in target)) {\n          if (target[propertyName] !== value) {\n            target[propertyName] = value;\n          }\n        } else if (value === false || value === undefined || value === null) {\n          target.removeAttribute(attrName);\n        } else {\n          const attrValue = value === true ? '' : String(value);\n          if (target.getAttribute(attrName) !== attrValue) {\n            target.setAttribute(attrName, attrValue);\n          }\n        }\n      };\n  }\n}\n\nconst TIMESTAMP = Date.now();\n\nconst getPlaceholder = (id = 0) => `{{h-${TIMESTAMP}-${id}}}`;\n\nconst PLACEHOLDER_REGEXP_TEXT = getPlaceholder('(\\\\d+)');\nconst PLACEHOLDER_REGEXP_EQUAL = new RegExp(`^${PLACEHOLDER_REGEXP_TEXT}$`);\nconst PLACEHOLDER_REGEXP_ALL = new RegExp(PLACEHOLDER_REGEXP_TEXT, 'g');\n\nconst ATTR_PREFIX = `--${TIMESTAMP}--`;\nconst ATTR_REGEXP = new RegExp(ATTR_PREFIX, 'g');\n\nconst preparedTemplates = new WeakMap();\n\nfunction applyShadyCSS(template, tagName) {\n  if (!tagName) return template;\n\n  return shadyCSS((shady) => {\n    let map = preparedTemplates.get(template);\n    if (!map) {\n      map = new Map();\n      preparedTemplates.set(template, map);\n    }\n\n    let clone = map.get(tagName);\n\n    if (!clone) {\n      clone = document.createElement('template');\n      clone.content.appendChild(template.content.cloneNode(true));\n\n      map.set(tagName, clone);\n\n      const styles = clone.content.querySelectorAll('style');\n\n      Array.from(styles).forEach((style) => {\n        const count = style.childNodes.length + 1;\n        for (let i = 0; i < count; i += 1) {\n          style.parentNode.insertBefore(document.createTextNode(getPlaceholder()), style);\n        }\n      });\n\n      shady.prepareTemplate(clone, tagName.toLowerCase());\n    }\n    return clone;\n  }, template);\n}\n\nexport function createId(parts, isSVG) {\n  return `${isSVG ? 'svg:' : ''}${parts.join(getPlaceholder())}`;\n}\n\nfunction createSignature(parts) {\n  const signature = parts.reduce((acc, part, index) => {\n    if (index === 0) {\n      return part;\n    }\n    if (parts.slice(index).join('').match(/\\s*<\\/\\s*(table|tr|thead|tbody|tfoot|colgroup)>/)) {\n      return `${acc}<!--${getPlaceholder(index - 1)}-->${part}`;\n    }\n    return acc + getPlaceholder(index - 1) + part;\n  }, '');\n\n  if (IS_IE) {\n    return signature.replace(\n      /style\\s*=\\s*([\"][^\"]+[\"]|['][^']+[']|[^\\s\"'<>/]+)/g,\n      match => `${ATTR_PREFIX}${match}`,\n    );\n  }\n\n  return signature;\n}\n\nfunction getPropertyName(string) {\n  return string.replace(/\\s*=\\s*['\"]*$/g, '').split(' ').pop();\n}\n\nfunction replaceComments(fragment) {\n  const iterator = document.createNodeIterator(fragment, NodeFilter.SHOW_COMMENT, null, false);\n  let node;\n  // eslint-disable-next-line no-cond-assign\n  while (node = iterator.nextNode()) {\n    if (PLACEHOLDER_REGEXP_EQUAL.test(node.textContent)) {\n      node.parentNode.insertBefore(document.createTextNode(node.textContent), node);\n      node.parentNode.removeChild(node);\n    }\n  }\n}\n\nexport function createInternalWalker(context) {\n  let node;\n\n  return {\n    get currentNode() { return node; },\n    nextNode() {\n      if (node === undefined) {\n        node = context.childNodes[0];\n      } else if (node.childNodes.length) {\n        node = node.childNodes[0];\n      } else if (node.nextSibling) {\n        node = node.nextSibling;\n      } else {\n        node = node.parentNode.nextSibling;\n      }\n\n      return !!node;\n    },\n  };\n}\n\nfunction createExternalWalker(context) {\n  return document.createTreeWalker(\n    context,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT,\n    null,\n    false,\n  );\n}\n\nconst createWalker = typeof window.ShadyDOM === 'object' && window.ShadyDOM.inUse ? createInternalWalker : createExternalWalker;\n\nconst container = document.createElement('div');\nexport function compile(rawParts, isSVG) {\n  const template = document.createElement('template');\n  const parts = [];\n\n  let signature = createSignature(rawParts);\n  if (isSVG) signature = `<svg>${signature}</svg>`;\n\n  if (IS_IE) {\n    template.innerHTML = signature;\n  } else {\n    container.innerHTML = `<template>${signature}</template>`;\n    template.content.appendChild(container.children[0].content);\n  }\n\n  if (isSVG) {\n    const svgRoot = template.content.firstChild;\n    template.content.removeChild(svgRoot);\n    Array.from(svgRoot.childNodes).forEach(node => template.content.appendChild(node));\n  }\n\n  replaceComments(template.content);\n\n  const compileWalker = createWalker(template.content);\n  let compileIndex = 0;\n\n  while (compileWalker.nextNode()) {\n    const node = compileWalker.currentNode;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n      const text = node.textContent;\n\n      if (!text.match(PLACEHOLDER_REGEXP_EQUAL)) {\n        const results = text.match(PLACEHOLDER_REGEXP_ALL);\n        if (results) {\n          let currentNode = node;\n          results\n            .reduce((acc, placeholder) => {\n              const [before, next] = acc.pop().split(placeholder);\n              if (before) acc.push(before);\n              acc.push(placeholder);\n              if (next) acc.push(next);\n              return acc;\n            }, [text])\n            .forEach((part, index) => {\n              if (index === 0) {\n                currentNode.textContent = part;\n              } else {\n                currentNode = currentNode.parentNode\n                  .insertBefore(document.createTextNode(part), currentNode.nextSibling);\n              }\n            });\n        }\n      }\n\n      const equal = node.textContent.match(PLACEHOLDER_REGEXP_EQUAL);\n      if (equal) {\n        if (!IS_IE) node.textContent = '';\n        parts[equal[1]] = [compileIndex, resolveValue];\n      }\n    } else if (node.nodeType === Node.ELEMENT_NODE) {\n      Array.from(node.attributes).forEach((attr) => {\n        const value = attr.value.trim();\n        const name = IS_IE ? attr.name.replace(ATTR_PREFIX, '') : attr.name;\n        const equal = value.match(PLACEHOLDER_REGEXP_EQUAL);\n        if (equal) {\n          const propertyName = getPropertyName(rawParts[equal[1]]);\n          parts[equal[1]] = [compileIndex, resolveProperty(name, propertyName, isSVG)];\n          node.removeAttribute(attr.name);\n        } else {\n          const results = value.match(PLACEHOLDER_REGEXP_ALL);\n          if (results) {\n            const partialName = `attr__${name}`;\n\n            results.forEach((placeholder, index) => {\n              const [, id] = placeholder.match(PLACEHOLDER_REGEXP_EQUAL);\n              parts[id] = [compileIndex, (host, target, attrValue) => {\n                const data = dataMap.get(target, {});\n                data[partialName] = (data[partialName] || value).replace(placeholder, attrValue == null ? '' : attrValue);\n\n                if ((results.length === 1) || (index + 1 === results.length)) {\n                  target.setAttribute(name, data[partialName]);\n                  data[partialName] = undefined;\n                }\n              }];\n            });\n\n            attr.value = '';\n\n            if (IS_IE && name !== attr.name) {\n              node.removeAttribute(attr.name);\n              node.setAttribute(name, '');\n            }\n          }\n        }\n      });\n    }\n\n    compileIndex += 1;\n  }\n\n  return (host, target, args) => {\n    const data = dataMap.get(target, { type: 'function' });\n\n    if (template !== data.template) {\n      if (data.template) removeTemplate(target);\n\n      const fragment = document.importNode(applyShadyCSS(template, host.tagName).content, true);\n\n      const renderWalker = createWalker(fragment);\n      const clonedParts = parts.slice(0);\n\n      let renderIndex = 0;\n      let currentPart = clonedParts.shift();\n\n      const markers = [];\n\n      Object.assign(data, { template, markers });\n\n      while (renderWalker.nextNode()) {\n        const node = renderWalker.currentNode;\n\n        if (node.nodeType === Node.TEXT_NODE) {\n          if (PLACEHOLDER_REGEXP_EQUAL.test(node.textContent)) {\n            node.textContent = '';\n          } else if (IS_IE) {\n            node.textContent = node.textContent.replace(ATTR_REGEXP, '');\n          }\n        } else if (process.env.NODE_ENV !== 'production' && node.nodeType === Node.ELEMENT_NODE) {\n          if (node.tagName.indexOf('-') > -1 && !customElements.get(node.tagName.toLowerCase())) {\n            throw Error(`[html] Missing '${stringifyElement(node)}' element definition in '${stringifyElement(host)}'`);\n          }\n        }\n\n        while (currentPart && currentPart[0] === renderIndex) {\n          markers.push([node, currentPart[1]]);\n          currentPart = clonedParts.shift();\n        }\n\n        renderIndex += 1;\n      }\n\n      const childList = Array.from(fragment.childNodes);\n\n      data.startNode = childList[0];\n      data.endNode = childList[childList.length - 1];\n\n      if (target.nodeType === Node.TEXT_NODE) {\n        let previousChild = target;\n        childList.forEach((child) => {\n          target.parentNode.insertBefore(child, previousChild.nextSibling);\n          previousChild = child;\n        });\n      } else {\n        target.appendChild(fragment);\n      }\n    }\n\n    data.markers.forEach(([node, fn], index) => {\n      fn(host, node, args[index], data);\n    });\n  };\n}\n","import { createMap } from '../utils';\n\nconst map = createMap();\n\nexport default function resolve(promise, placeholder, delay = 200) {\n  return (host, target) => {\n    let timeout;\n\n    if (placeholder) {\n      timeout = setTimeout(() => {\n        timeout = undefined;\n\n        requestAnimationFrame(() => {\n          placeholder(host, target);\n        });\n      }, delay);\n    }\n\n    map.set(target, promise);\n    promise.then((template) => {\n      if (timeout) clearTimeout(timeout);\n\n      if (map.get(target) === promise) {\n        template(host, target);\n        map.set(target, null);\n      }\n    });\n  };\n}\n","import define from '../define';\n\nimport { compile, createId } from './template';\nimport resolve from './resolve';\n\nfunction defineElements(elements) {\n  define(elements);\n  return this;\n}\n\nfunction key(id) {\n  this.id = id;\n  return this;\n}\n\nconst updates = new Map();\n\nfunction create(parts, args, isSVG) {\n  const update = (host, target = host) => {\n    const id = createId(parts, isSVG);\n    let render = updates.get(id);\n\n    if (!render) {\n      render = compile(parts, isSVG);\n      updates.set(id, render);\n    }\n\n    render(host, target, args);\n  };\n\n  return Object.assign(update, { define: defineElements, key });\n}\n\nexport function html(parts, ...args) {\n  return create(parts, args);\n}\n\nexport function svg(parts, ...args) {\n  return create(parts, args, true);\n}\n\nObject.assign(html, { resolve });\nObject.assign(svg, { resolve });\n","export { default as define } from './define';\nexport { default as property } from './property';\nexport { default as parent } from './parent';\nexport { default as children } from './children';\nexport { default as render } from './render';\n\nexport { dispatch } from './utils';\n\nexport { html, svg } from './html';\n"],"sourceRoot":""}